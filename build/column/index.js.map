{"version":3,"file":"column/index.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAS,MCAnD,EAA+BA,OAAW,GAAW,QCArD,GCA+BA,OAAW,GAAU,ODArBA,OAAW,GAAe,aEAzD,EAA+BA,OAAW,GAAc,WCAxD,EAA+BA,OAAW,GAAQ,KC0BxDC,QAAQC,IAAI,uCAgCZC,EAAAA,EAAAA,WACC,mBACA,iCACAC,EAAAA,EAAAA,6BACEC,GACA,SAAqCC,GACpC,MAAM,KAAEC,EAAF,WAAQC,EAAR,cAAoBC,EAApB,SAAmCC,GAAaJ,EACtD,GAAI,gBAAkBC,EACrB,OAAO,mBAACF,EAAcC,GAGvB,MAAM,MAAEK,EAAF,UAASC,GAAcJ,GAEvB,MAAEK,EAAF,eAASC,EAAT,iBAAyBC,EAAzB,aAA2CC,IAChDC,EAAAA,EAAAA,YACEC,IACA,MAAM,UACLC,EADK,cAELC,EAFK,cAGLC,EAHK,qBAILC,EAJK,mBAKLC,GACGL,EAAO,qBAELM,EAAoBF,EAAqBZ,GAEzCe,EAAiBF,EAAmBC,GAEpCE,EAAW,CAChBb,MAAOO,EAAcV,EAAUc,GAC/BV,eAAgB,EAAIO,EAAcX,GAAUiB,OAC5CZ,iBAAkBI,EAAUK,GAC5BR,aAAcQ,EACdC,kBAGD,OADAxB,QAAQC,IAAI,wBAAyBwB,GAC9BA,CAAP,GAED,CAAChB,IAmBH,OAhBAkB,EAAAA,EAAAA,YAAU,KACL,EAAIb,EAAiBY,QACxB1B,QAAQC,IACP,wBAhDP,SAAiC2B,EAAcnB,GAC9C,OAAO,IA3BR,SAAsBmB,EAAcnB,GACnC,MAAMoB,EAAkB,GAClBC,EAAaF,EAAaG,WAC9BC,GAAWA,EAAOvB,WAAaA,IAEjCT,QAAQC,IAAI,8BAA+B6B,GAC3C,MAAM,MAAEpB,GAAUkB,EAAaE,GAAYvB,WAiB3C,OAfAqB,EAAaK,SAASD,IAErB,GAAIA,EAAOzB,WAAWG,MAAO,CAC5B,IAAIwB,EAAcF,EAAOzB,WAAWG,MAKpCwB,EAAcA,EAAYC,QAAQ,cAAe,IACjDN,EAAgBO,KAAKF,EACrB,KAGFlC,QAAQC,IAAI,mCAAoC4B,GAEzCA,EAAgBQ,QAAO,CAACC,EAAKC,IAASD,EAAME,SAASD,IAAO,EACnE,CAGaE,CAAab,EAAcnB,EACxC,CA+CMiC,CAAwB5B,EAAkBL,GAE3C,GACC,CAACK,KAEJa,EAAAA,EAAAA,YAAU,KACLhB,GAEHH,EAAc,CAAEE,MAAO,IACvB,GACC,CAACC,KAGH,mBAAC,EAAAgC,SAAD,MACC,mBAACvC,EAAcC,IACf,mBAAC,EAAAuC,0BAAD,MACC,yDACA,mBAAC,EAAAC,cAAD,CACCC,OAAOC,EAAAA,EAAAA,IAAG,6BACVC,QAASrC,EACTsC,SAAU,KACTzC,EAAc,CAAEG,WAAYA,GAA5B,EAEDuC,MAAMH,EAAAA,EAAAA,IACL,oEAGF,mBAAC,EAAAI,YAAD,OAIH,GACF,mCAED,G","sources":["webpack://@pewresearch/core-block-library/external window [\"wp\",\"element\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"hooks\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"compose\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"components\"]","webpack://@pewresearch/core-block-library/external window [\"wp\",\"data\"]","webpack://@pewresearch/core-block-library/./src/column/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { addFilter } from '@wordpress/hooks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport {\n\tcreateBlock,\n\tregisterBlockStyle,\n\tregisterBlockVariation,\n\trawHandler,\n} from '@wordpress/blocks';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport {\n\tInspectorControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport {\n\tSelectControl,\n\tTextControl,\n\tToggleControl,\n\tCardDivider,\n\tPanelBody,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\nconsole.log('Hello World -> src/column/index.js');\n\nfunction getAllWidths(otherColumns, clientId) {\n\tconst allColumnWidths = [];\n\tconst thisColumn = otherColumns.findIndex(\n\t\t(column) => column.clientId === clientId,\n\t);\n\tconsole.log('getAllWidths() thisColumn: ', thisColumn);\n\tconst { width } = otherColumns[thisColumn].attributes;\n\n\totherColumns.forEach((column) => {\n\t\t// if column attributes does not have a width property then continue.\n\t\tif (column.attributes.width) {\n\t\t\tlet columnWidth = column.attributes.width;\n\t\t\t// if (clientId === column.clientId) {\n\t\t\t// \tcolumnWidth = width;\n\t\t\t// }\n\t\t\t// Remove %, px, vw, vh from columnWidth\n\t\t\tcolumnWidth = columnWidth.replace(/%|px|vw|vh/g, '');\n\t\t\tallColumnWidths.push(columnWidth);\n\t\t}\n\t});\n\n\tconsole.log('getAllWidths() allColumnWidths: ', allColumnWidths);\n\n\treturn allColumnWidths.reduce((acc, curr) => acc + parseInt(curr), 0);\n}\n\nfunction calculateAvailableWidth(otherColumns, clientId) {\n\treturn 100 - getAllWidths(otherColumns, clientId);\n}\n\naddFilter(\n\t'editor.BlockEdit',\n\t'prc-core-block-library/column',\n\tcreateHigherOrderComponent(\n\t\t(BlockEdit) =>\n\t\t\tfunction ColumnBlockAdvancedControls(props) {\n\t\t\t\tconst { name, attributes, setAttributes, clientId } = props;\n\t\t\t\tif ('core/column' !== name) {\n\t\t\t\t\treturn <BlockEdit {...props} />;\n\t\t\t\t}\n\n\t\t\t\tconst { width, fillWidth } = attributes;\n\n\t\t\t\tconst { index, hasChildBlocks, otheColumnBlocks, rootClientId } =\n\t\t\t\t\tuseSelect(\n\t\t\t\t\t\t(select) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tgetBlocks,\n\t\t\t\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\t\t\t\tgetBlockAttributes,\n\t\t\t\t\t\t\t} = select('core/block-editor');\n\n\t\t\t\t\t\t\tconst rootBlockClientId = getBlockRootClientId(clientId);\n\t\t\t\t\t\t\t// Get attributes from 'core/columns' parent block.\n\t\t\t\t\t\t\tconst rootAttributes = getBlockAttributes(rootBlockClientId);\n\n\t\t\t\t\t\t\tconst toReturn = {\n\t\t\t\t\t\t\t\tindex: getBlockIndex(clientId, rootBlockClientId),\n\t\t\t\t\t\t\t\thasChildBlocks: 0 < getBlockOrder(clientId).length,\n\t\t\t\t\t\t\t\totheColumnBlocks: getBlocks(rootBlockClientId),\n\t\t\t\t\t\t\t\trootClientId: rootBlockClientId,\n\t\t\t\t\t\t\t\trootAttributes,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconsole.log('core/column->advanced', toReturn);\n\t\t\t\t\t\t\treturn toReturn;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[clientId],\n\t\t\t\t\t);\n\n\t\t\t\tuseEffect(() => {\n\t\t\t\t\tif (0 < otheColumnBlocks.length) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'max width available: ',\n\t\t\t\t\t\t\tcalculateAvailableWidth(otheColumnBlocks, clientId),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}, [otheColumnBlocks]);\n\n\t\t\t\tuseEffect(() => {\n\t\t\t\t\tif (fillWidth) {\n\t\t\t\t\t\t// Null out width to use the remaining width available.\n\t\t\t\t\t\tsetAttributes({ width: '' });\n\t\t\t\t\t}\n\t\t\t\t}, [fillWidth]);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t\t<p>Column Advanced Controls</p>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={__('Fill width with remaining')}\n\t\t\t\t\t\t\t\tchecked={fillWidth}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetAttributes({ fillWidth: !fillWidth });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t'Zeroes out the width, flexbox then fills the remaining width.',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t},\n\t\t'withColumnBlockAdvancedControls',\n\t),\n\t21,\n);\n"],"names":["window","console","log","addFilter","createHigherOrderComponent","BlockEdit","props","name","attributes","setAttributes","clientId","width","fillWidth","index","hasChildBlocks","otheColumnBlocks","rootClientId","useSelect","select","getBlocks","getBlockIndex","getBlockOrder","getBlockRootClientId","getBlockAttributes","rootBlockClientId","rootAttributes","toReturn","length","useEffect","otherColumns","allColumnWidths","thisColumn","findIndex","column","forEach","columnWidth","replace","push","reduce","acc","curr","parseInt","getAllWidths","calculateAvailableWidth","Fragment","InspectorAdvancedControls","ToggleControl","label","__","checked","onChange","help","CardDivider"],"sourceRoot":""}
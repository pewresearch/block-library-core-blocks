(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,l=window.wp.hooks,n=window.wp.compose,o=(window.wp.blocks,window.wp.blockEditor),i=window.wp.components,c=window.wp.data;console.log("Hello World -> src/column/index.js"),(0,l.addFilter)("editor.BlockEdit","prc-core-block-library/column",(0,n.createHigherOrderComponent)((l=>function(n){const{name:r,attributes:a,setAttributes:d,clientId:s}=n;if("core/column"!==r)return(0,e.createElement)(l,n);const{width:h,fillWidth:w}=a,{index:u,hasChildBlocks:m,otheColumnBlocks:g,rootClientId:p}=(0,c.useSelect)((e=>{const{getBlocks:t,getBlockIndex:l,getBlockOrder:n,getBlockRootClientId:o,getBlockAttributes:i}=e("core/block-editor"),c=o(s),r=i(c),a={index:l(s,c),hasChildBlocks:0<n(s).length,otheColumnBlocks:t(c),rootClientId:c,rootAttributes:r};return console.log("core/column->advanced",a),a}),[s]);return(0,e.useEffect)((()=>{g.length>0&&console.log("max width available: ",function(e,t){return 100-function(e,t){let l=[];const n=e.findIndex((e=>e.clientId===t));console.log("getAllWidths() thisColumn: ",n);const{width:o}=e[n].attributes;return e.forEach((e=>{if(e.attributes.width){let t=e.attributes.width;t=t.replace(/%|px|vw|vh/g,""),l.push(t)}})),console.log("getAllWidths() allColumnWidths: ",l),l.reduce(((e,t)=>e+parseInt(t)),0)}(e,t)}(g,s))}),[g]),(0,e.useEffect)((()=>{w&&d({width:""})}),[w]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l,n),(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(i.PanelBody,{title:"Column settings (advanced)"},(0,e.createElement)("p",null,'Get all the widths in the parent columns block and then have a toggle for "fill width with remaining" which would calculate all the widths and whats remaining depending on unit of measurement'),(0,e.createElement)("p",null,"HOWEVER because we want to maintain backwards compat we should also change the width to meet the percentage remaining. This way if you deactivate this block library it will still ~mostly~ work as intended."),(0,e.createElement)(i.ToggleControl,{label:(0,t.__)("Fill width with remaining"),checked:w,onChange:()=>{d({fillWidth:!w})},help:(0,t.__)("Zeroes out the width, flexbox then fills the remaining width.")}))),(0,e.createElement)(o.InspectorAdvancedControls,null,(0,e.createElement)("p",null,"Column Advanced Controls"),(0,e.createElement)(i.CardDivider,null)))}),"withColumnBlockAdvancedControls"),21)})();
//# sourceMappingURL=index.js.map
{"version":3,"file":"heading/index.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAe,YCAzD,EAA+BA,OAAW,GAAc,WCAxD,EAA+BA,OAAW,GAAS,MCkBnDC,EAAY,eACZC,EAAkB,iCAGlBC,GAAqBC,EAAAA,EAAAA,6BACzBC,GACA,SAAUC,GACT,MAAM,KAAEC,EAAF,WAAQC,EAAR,cAAoBC,GAAkBH,EAC5C,GAAIL,IAAcM,EACjB,OAAO,mBAACF,EAAcC,GAEvB,MAAM,UAAEI,EAAF,WAAaC,EAAb,QAAyBC,GAAYJ,EAC3C,OACC,mBAAC,EAAAK,SAAD,MACC,mBAAC,EAAAC,cAAD,MACC,mBAAC,EAAAC,aAAD,MACC,mBAAC,EAAAC,cAAD,CACCC,KAAK,WACLC,MAAOR,EAAY,iBAAmB,eACtCS,SAAUT,EACVU,QAAS,KAIRX,EAAc,CAFbC,WAAYA,GAEb,OAKJ,mBAAC,EAAAW,0BAAD,KACEX,IACA,mBAAC,EAAAY,YAAD,CACCJ,OAAOK,EAAAA,EAAAA,IAAG,qBAAsB,qBAChCC,MAAOb,EACPc,YAAab,EACbc,SAAWF,GAAUf,EAAc,CAAEE,WAAYa,QAIpD,mBAACnB,EAAcC,GAGjB,GACF,wBAEDqB,EAAAA,EAAAA,WAAU,mBAAoBzB,EAAiBC,EAAoB,KAmBnEwB,EAAAA,EAAAA,WAAU,2BAA4BzB,GAVtC,SAA+B0B,EAAUrB,GACxC,OAAIN,IAAcM,IAGlBqB,EAASpB,WAAWE,UAAY,CAC/BmB,KAAM,UACNC,SAAS,IAJFF,CAOR,KAGDG,EAAAA,EAAAA,wBAAuB9B,EAAW,CACjCM,KAAM,UACNyB,OAAOT,EAAAA,EAAAA,IAAG,WACVU,aAAaV,EAAAA,EAAAA,IAAG,sBAChBN,KAAM,YACNT,WAAY,CACXE,WAAW,EACXwB,MAAO,I","sources":["webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"element\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"compose\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"components\"]","webpack://@pewresearch/block-library-primitives/external window [\"wp\",\"hooks\"]","webpack://@pewresearch/block-library-primitives/./src/heading/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { Fragment } from '@wordpress/element';\nimport { registerBlockVariation } from '@wordpress/blocks';\nimport {\n\tBlockControls,\n\tInspectorAdvancedControls,\n} from '@wordpress/block-editor';\nimport {\n\tTextControl,\n\tToolbarGroup,\n\tToolbarButton,\n} from '@wordpress/components';\nimport { addFilter } from '@wordpress/hooks';\n\nconst BLOCKNAME = 'core/heading';\nconst BLOCKIDENTIFIER = 'prc-core-block-library/heading';\n\n// Add toolbar to core/heading block with toggle for isChapter attribute.\nconst HeadingBlockFilter = createHigherOrderComponent(\n\t(BlockEdit) =>\n\t\tfunction (props) {\n\t\t\tconst { name, attributes, setAttributes } = props;\n\t\t\tif (BLOCKNAME !== name) {\n\t\t\t\treturn <BlockEdit {...props} />;\n\t\t\t}\n\t\t\tconst { isChapter, altTocText, content } = attributes;\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BlockControls>\n\t\t\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\ticon=\"book-alt\"\n\t\t\t\t\t\t\t\tlabel={isChapter ? 'Remove Chapter' : 'Make Chapter'}\n\t\t\t\t\t\t\t\tisActive={isChapter}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst attrs = {\n\t\t\t\t\t\t\t\t\t\tisChapter: !isChapter\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tsetAttributes({ ...attrs });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t{isChapter && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={__('Alternate TOC Text', 'prc-block-library')}\n\t\t\t\t\t\t\t\tvalue={altTocText}\n\t\t\t\t\t\t\t\tplaceholder={content}\n\t\t\t\t\t\t\t\tonChange={(value) => setAttributes({ altTocText: value })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t},\n\t'withChapterControls',\n);\naddFilter('editor.BlockEdit', BLOCKIDENTIFIER, HeadingBlockFilter, 21);\n\n/**\n * Modify default settings on core/heading block. Change the default heading level to 4 and add isChapter attribute to replace prc-block/chapter at a later date.\n *\n * @param {*} settings\n * @param {*} name\n * @returns\n */\nfunction modifyDefaultSettings(settings, name) {\n\tif (BLOCKNAME !== name) {\n\t\treturn settings;\n\t}\n\tsettings.attributes.isChapter = {\n\t\ttype: 'boolean',\n\t\tdefault: false,\n\t};\n\treturn settings;\n}\naddFilter('blocks.registerBlockType', BLOCKIDENTIFIER, modifyDefaultSettings);\n\nregisterBlockVariation(BLOCKNAME, {\n\tname: 'chapter',\n\ttitle: __('Chapter'),\n\tdescription: __('A chapter heading.'),\n\ticon: 'editor-ol',\n\tattributes: {\n\t\tisChapter: true,\n\t\tlevel: 3,\n\t},\n});\n"],"names":["window","BLOCKNAME","BLOCKIDENTIFIER","HeadingBlockFilter","createHigherOrderComponent","BlockEdit","props","name","attributes","setAttributes","isChapter","altTocText","content","Fragment","BlockControls","ToolbarGroup","ToolbarButton","icon","label","isActive","onClick","InspectorAdvancedControls","TextControl","__","value","placeholder","onChange","addFilter","settings","type","default","registerBlockVariation","title","description","level"],"sourceRoot":""}
@import './constants.scss';

/**
 * Grid Columns
 */
.wp-block-columns.is-css-grid,
.wp-block-columns.block-editor-block-list__block.wp-block.is-css-grid {
	box-sizing: border-box;
	// Prevent long unbroken words from overflowing.
	word-break: break-word; // For back-compat.
	overflow-wrap: break-word; // New standard.

	display: grid;
	grid-gap: $grid-gutter;
	grid-template-columns: $grid-mobile;

	// Vertical Divider Lines
	&.has-divider > .wp-block-column:not(:first-of-type):not(.is-selected):not(.is-highlighted):not(.is-hovered) {
		&:after {
			content: "";
			position: absolute;
			height: 100%;
			top: 0;
			left: -15px;
			border-left: 1px solid #eaeaea;
		}
	}

	.wp-block-column {
		height: 100%;
		width: 100%;
		position: relative;
		box-sizing: border-box;
		& > * {
			box-sizing: border-box;
		}
	}

	// Grid rules.
	// Mobile first.
	@for $i from 1 through 12 {
		@for $x from 1 through 4 {
			& > .wp-block-column.column#{ $x }-mobile-grid__start-#{ $i } {
				grid-column-start: $i;
			}
		}
	}

	@for $i from 1 through 12 {
		@for $x from 1 through 4 {
			& > .wp-block-column.column#{ $x }-mobile-grid__span-#{ $i }  {
				grid-column-end: span $i; // Set it to span $i columns, regardless of starting position.
			}
		}
	}

	@for $i from 1 through 4 {
		@for $x from 1 through 4 {
			& > .wp-block-column.column#{ $x }-mobile-grid__row-#{ $i } {
				grid-row-start: $i;
			}
		}
	}

	// Tablet grid rules.
	@media (min-width: #{ ($break-small) }) {
		grid-template-columns: $grid-tablet;

		@for $i from 1 through 12 {
			@for $x from 1 through 4 {
				& > .wp-block-column.column#{ $x }-tablet-grid__start-#{ $i } {
					grid-column-start: $i;
				}
			}
		}

		@for $i from 1 through 12 {
			@for $x from 1 through 4 {
				& > .wp-block-column.column#{ $x }-tablet-grid__span-#{ $i }  {
					grid-column-end: span $i; // Set it to span $i columns, regardless of starting position.
				}
			}
		}

		@for $i from 1 through 4 {
			@for $x from 1 through 4 {
				& > .wp-block-column.column#{ $x }-tablet-grid__row-#{ $i } {
					grid-row-start: $i;
				}
			}
		}
	}


	// Desktop grid rules.
	@media (min-width: #{ ($break-large) }) {
		grid-template-columns: $grid-desktop;

		@for $i from 1 through 12 {
			@for $x from 1 through 6 {
				& > .wp-block-column.column#{ $x }-grid__start-#{ $i } {
					grid-column-start: $i;
				}
			}
		}

		@for $i from 1 through 12 {
			@for $x from 1 through 6 {
				& > .wp-block-column.column#{ $x }-grid__span-#{ $i }  {
					grid-column-end: span $i; // Set it to span $i columns, regardless of starting position.
				}
			}
		}

		@for $i from 1 through 4 {
			@for $x from 1 through 4 {
				& > .wp-block-column.column#{ $x }-grid__row-#{ $i } {
					grid-row-start: $i;
				}
			}
		}
	}
}
